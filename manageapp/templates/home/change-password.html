{% extends "layouts/base.html" %}

{% block title %} {{ current_user.fullname }} - Đổi Mật Khẩu {% endblock %}

{% block body_class %} blog-author {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

{% include 'includes/navigation-transparent.html' %}

<header>
  <div class="page-header min-height-400" style="background-image: url('https://images.unsplash.com/photo-1503642551022-c011aafb3c88?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80');"
    loading="lazy">
    <span class="mask bg-gradient-dark opacity-8"></span>
  </div>
</header>

<div class="card card-body blur shadow-blur mx-3 mx-md-4 mt-n6 mb-4">
  <!-- START Testimonials w/ user image & text & info -->
  <section class="pt-6 pb-3 position-relative">
    <div class="container">
      <div class="row">
        <div class="col-12 mx-auto">
          <div class="mt-n8 mt-md-n9 text-center">
            <img class="avatar avatar-xxl shadow-xl position-relative z-index-2" style="object-fit: cover"
              src="{{ current_user.avatar }}" alt="bruce" loading="lazy">
          </div>
          <div class="row py-5">
            <div class="col-lg-7 col-md-7 z-index-2 position-relative px-md-2 px-sm-5 mx-auto">
              <div class="d-flex mb-4 justify-content-between align-items-center mb-2">
                <h3 class="mb-0">Xin chào {{ current_user.fullname }}!</h3>
              </div>
              <p class="text-lg mb-0">
                Bạn có thể đổi mật khẩu vì lý do bảo mật. Mật khẩu cho tài khoản này của bạn được dùng để truy cập
                vào website quản lý trường học của chúng tôi và sử dụng các tiện ích đi kèm.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- END Testimonials w/ user image & text & info -->
</div>

<section class="pb-0 pt-lg-5">
  <div class="container">
    <div class="row">
      <div class="col">
        <div class="card box-shadow-xl overflow-hidden mb-5">
          <div class="row">
            <div class="col-lg-5 position-relative bg-cover px-0"
              style="background-image: url('https://images.unsplash.com/photo-1496096265110-f83ad7f96608?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80')"
              loading="lazy">
              <div class="z-index-2 text-center d-flex h-100 w-100 d-flex m-auto justify-content-center">
                <div class="mask bg-gradient-dark opacity-8"></div>
                <div class="p-5 position-relative text-start my-auto z-index-2">
                  <h3 class="text-white">Bảo mật tài khoản <br> của chính mình</h3>
                  <p class="text-white opacity-8 mb-4">
                    Hãy đặt mật khẩu dễ nhớ và không quá dài dòng
                    <br>Phản ánh cho chúng tôi nếu bạn gặp vấn đề
                  </p>
                  <div class="d-flex p-2 text-white">
                    <div>
                      <i class="fas fa-phone text-sm"></i>
                    </div>
                    <div class="ps-3">
                      <span class="text-sm opacity-8">+84 123 456 789</span>
                    </div>
                  </div>
                  <div class="d-flex p-2 text-white">
                    <div>
                      <i class="fas fa-envelope text-sm"></i>
                    </div>
                    <div class="ps-3">
                      <span class="text-sm opacity-8">support@congnghephanmem.com</span>
                    </div>
                  </div>
                  <div class="d-flex p-2 text-white">
                    <div>
                      <i class="fas fa-map-marker-alt text-sm"></i>
                    </div>
                    <div class="ps-3">
                      <span class="text-sm opacity-8">371 Nguyễn Kiệm, Phường 3, Quận Gò Vấp <br> Thành phố Hồ Chí
                        Minh</span>
                    </div>
                  </div>
                  <div class="mt-4 d-flex">
                    <form action="https://www.facebook.com/comchancanhh" target="_blank">
                      <button type="submit" class="btn btn-icon-only btn-link text-white btn-lg mb-0"
                        data-toggle="tooltip" data-placement="bottom" data-original-title="Facebook">
                        <i class="fab fa-facebook"></i>
                      </button>
                    </form>

                    <form action="https://www.instagram.com/yel.nam" target="_blank">
                      <button type="submit" class="btn btn-icon-only btn-link text-white btn-lg mb-0"
                        data-toggle="tooltip" data-placement="bottom" data-original-title="Instagram">
                        <i class="fab fa-instagram"></i>
                      </button>
                    </form>

                    <form action="https://www.youtube.com/channel/UCWNn-P-G4_6k6nk8y0_uFrw" target="_blank">
                      <button type="submit" class="btn btn-icon-only btn-link text-white btn-lg mb-0"
                        data-toggle="tooltip" data-placement="bottom" data-original-title="Youtube">
                        <i class="fab fa-youtube"></i>
                      </button>
                    </form>

                    <form action="https://github.com/hoangnam1909" target="_blank">
                      <button type="submit" class="btn btn-icon-only btn-link text-white btn-lg mb-0"
                        data-toggle="tooltip" data-placement="bottom" data-original-title="Github">
                        <i class="fab fa-github"></i>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-7">
              <form class="p-3" action="{{ url_for('change_password') }}" method="post">
                <div class="card-header px-4 py-sm-5 py-3">
                  <h2>Thay đổi mật khẩu</h2>
                  <p class="lead">Tài khoản: {{ current_user.username }}</p>
                </div>

                <div class="card-body pt-1">
                  <div class="row">
                    <div class="col-md-12 pe-2 mb-3" style="display: none;">
                      <div class="input-group input-group-static mb-4">
                        <label>ID</label>
                        <input type="text" class="form-control" name="id" value="{{ current_user.id }}">
                      </div>
                    </div>

                    <div class="col-md-12 pe-2 mb-3">
                      <div class="input-group input-group-static mb-4">
                        <label>Mật khẩu hiện tại</label>
                        <input type="password" class="form-control" name="current_password"
                          placeholder="Nhập mật khẩu hiện tại" required>
                      </div>
                    </div>

                    <div class="col-md-12 pe-2 mb-3">
                      <div class="input-group input-group-static mb-4">
                        <label>Mật khẩu mới</label>
                        <input type="password" class="form-control" name="new_password" placeholder="Nhập mật khẩu mới"
                          required>
                      </div>
                    </div>

                    <div class="col-md-12 pe-2 mb-3">
                      <div class="input-group input-group-static mb-4">
                        <label>Xác minh mật khẩu mới</label>
                        <input type="password" class="form-control" name="confirm_password"
                          placeholder="Nhập lại mật khẩu mới để xác nhận" required>
                      </div>
                    </div>
                  </div>
                  <div class="row d-flex flex-column align-items-end">
                    {% if warning_msg %}
                    <div class="alert alert-warning text-white text-center font-weight-bold me-3" role="alert">
                      {{ warning_msg }}
                    </div>
                    {% endif %}

                    {% if success_msg %}
                    <div class="alert alert-success text-white text-center font-weight-bold me-3" role="alert">
                      {{ success_msg }}
                    </div>
                    {% endif %}
                    <div class="col-md-6 text-end ms-auto">
                      <button type="submit" class="btn bg-gradient-primary mb-0 me-1">Cập nhật</button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
{% endblock javascripts %}